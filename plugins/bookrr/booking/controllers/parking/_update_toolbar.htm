<div class="toolbar-item toolbar-primary">
    <div data-control="toolbar loading-indicator-container">
        <div class="btn-group">
            <button
                type="submit"
                data-request="onSave"
                data-request-data="redirect:0"
                data-hotkey="ctrl+s, cmd+s"
                data-load-indicator="Saving Booking..."
                data-request-success="$.request('form::onRefresh')"
                data-request-update="update_toolbar: '#toolbar'"
                class="btn btn-primary">
                <u>S</u>ave
            </button>
            <button
                type="button"
                data-request="onSave"
                data-request-data="close:1"
                data-hotkey="ctrl+enter, cmd+enter"
                data-load-indicator="Saving Booking..."
                class="btn btn-default">
                Save & Close
            </button>
            <a class="btn btn-default" href="<?= Backend::url('bookrr/booking/parking') ?>">Close</a>
        </div>

        <div class="btn-group">
            <button type="button" class="btn btn-primary oc-icon-key">Move Key</button>
            <a class="btn btn-default oc-icon-cart-plus" href="<?= '/backend/bookrr/booking/cart/update/'.$this->formGetModel()->cart->id ?>">Cart</a>
            <?php if($this->formGetModel()->status=='pending'): ?>
            <button
                type="submit"
                data-request="onCheckIn"
                data-request-data="id:<?= $this->formGetModel()->id ?>,context:'update'"
                data-load-indicator="Checking In..."
                class="btn btn-info oc-icon-arrow-circle-down">
                Check <u>In</u>
            </button>
            <?php endif; ?>
            <?php if($this->formGetModel()->status=='parked'): ?>
            <button
                type="submit"
                data-request="onCheckOut"
                data-load-indicator="Checking Out..."
                data-request-data="id:<?= $this->formGetModel()->id ?>,context:'update'"
                data-load-indicator="Updating..."
                data-request-success="$.request('form::onRefresh')"
                class="btn btn-warning oc-icon-arrow-circle-up">
                Check <u>Out</u>
            </button>
            <?php endif; ?>
            <?php if(!$this->formGetModel()->cart->isPaid): ?>
            <button tabindex="-1"
                class="btn btn-warning oc-icon-credit-card"
                data-handler="onPay"
                data-request-data="id:<?= $this->formGetModel()->id ?>"
                data-control="popup">Pay
            </button>
            <?php endif; ?>
        </div>
        
        <button
            type="button"
            class="oc-icon-trash-o btn-icon danger pull-right"
            data-request="onDelete"
            data-load-indicator="Deleting Booking..."
            data-request-confirm="Delete this booking?">
        </button>
    </div>
</div>